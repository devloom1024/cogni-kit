openapi: 3.0.0
info:
  title: 金融数据服务 v2 (Python)
  version: 2.0.0
  description: |
    按资产类型分组的金融数据微服务，封装 AkShare 数据接口。

    ## 模块
    - **/akshare/stock**: 股票数据 (A股/港股/美股)
    - **/akshare/etf**: ETF 数据
    - **/akshare/fund**: 场外基金数据
    - **/indicators**: 技术指标计算

servers:
  - url: http://localhost:8001
    description: 本地开发服务器
  - url: https://api.cognikit.com/financial
    description: 生产环境服务器

tags:
  - name: Health
    description: 健康检查
  - name: Stock
    description: 股票数据 - A股/港股/美股行情与信息
  - name: ETF
    description: ETF 数据 - 场内基金行情与信息
  - name: Fund
    description: 场外基金数据 - 净值与基金信息
  - name: Indicators
    description: 技术指标计算

paths:
  # ==================== 健康检查 ====================
  /api/v1/health:
    get:
      summary: 服务健康检查
      tags: [Health]
      responses:
        "200":
          description: 服务正常
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
                  modules:
                    type: array
                    items:
                      type: string
                    example: ["akshare", "indicators"]

  # ==================== 股票数据同步 ====================
  /api/v1/akshare/stock/list:
    get:
      summary: 获取全量股票列表 (同步用)
      description: |
        **用途**: 供定时任务同步使用。
        **数据量**: 约 5000 条。
        **AkShare**: `stock_zh_a_spot_em()`, `stock_hk_spot_em()`, `stock_us_spot_em()`
      tags: [Stock]
      parameters:
        - name: market
          in: query
          schema:
            type: string
            enum: [CN, HK, US]
          description: 市场筛选，不传返回全部
      responses:
        "200":
          description: 股票列表
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/StockListItem"

  # ==================== 股票实时行情 ====================
  /api/v1/akshare/stock/{symbol}/spot:
    get:
      summary: 获取股票实时行情(含五档盘口)
      description: |
        获取单只股票的实时行情数据。

        **A股**: 返回完整行情数据(含五档盘口、涨跌停价、内外盘等)
        **港股/美股**: 返回基础行情数据(不含五档盘口)

        **AkShare**:
        - A股: `stock_bid_ask_em()` (优化性能,支持单股查询)
        - 港股: `stock_hk_spot_em()`
        - 美股: `stock_us_spot_em()`
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - $ref: "#/components/parameters/Market"
      responses:
        "200":
          description: 实时行情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockSpot"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/stock/spot/batch:
    post:
      summary: 批量获取股票实时行情
      description: 批量获取多只股票的实时行情，最多 50 只
      tags: [Stock]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [symbols]
              properties:
                symbols:
                  type: array
                  items:
                    type: object
                    properties:
                      symbol:
                        type: string
                      market:
                        type: string
                        enum: [CN, HK, US]
                  maxItems: 50
      responses:
        "200":
          description: 批量行情
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  $ref: "#/components/schemas/StockSpot"

  # ==================== 股票公司信息 ====================
  /api/v1/akshare/stock/{symbol}/profile:
    get:
      summary: 获取公司基本信息 (F10)
      description: |
        获取公司基本资料。
        **AkShare**:
        - A股: `stock_individual_info_em()` + `stock_individual_basic_info_xq()`
        - 港股: `stock_individual_basic_info_hk_xq()`
        - 美股: `stock_individual_basic_info_us_xq()`
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - $ref: "#/components/parameters/Market"
      responses:
        "200":
          description: 公司信息
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockProfile"
        "404":
          $ref: "#/components/responses/NotFound"

  # /valuation 接口已删除 - 估值数据请使用 /profile 接口获取

  # ==================== 股票财务数据 ====================
  /api/v1/akshare/stock/{symbol}/financial:
    get:
      summary: 获取财务数据摘要
      description: |
        获取财务指标摘要。
        **AkShare**:
        - A股: `stock_financial_abstract()`
        - 港股: `stock_financial_hk_report_em()`
        - 美股: `stock_financial_us_report_em()`
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - $ref: "#/components/parameters/Market"
      responses:
        "200":
          description: 财务数据
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockFinancial"
        "404":
          $ref: "#/components/responses/NotFound"

  # ==================== 股票股东信息 (仅A股) ====================
  /api/v1/akshare/stock/{symbol}/shareholders:
    get:
      summary: 获取股东信息
      description: |
        获取十大股东、股东人数等信息。**仅 A 股支持**。
        **AkShare**:
        - `stock_gdfx_top_10_em()`: 十大股东
        - `stock_gdfx_free_top_10_em()`: 十大流通股东
        - `stock_zh_a_gdhs()`: 股东人数
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 股东信息
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StockShareholders"
        "404":
          $ref: "#/components/responses/NotFound"

  # ==================== 股票资金流向 (仅A股) ====================
  /api/v1/akshare/stock/{symbol}/fund-flow:
    get:
      summary: 获取资金流向
      description: |
        获取主力资金流向数据。**仅 A 股支持**。
        **AkShare**: `stock_individual_fund_flow()`
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 资金流向
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundFlow"
        "404":
          $ref: "#/components/responses/NotFound"

  # /bid-ask 接口已删除 - 五档盘口数据已包含在 /spot 接口中

  # ==================== 股票 K 线 ====================
  /api/v1/akshare/stock/{symbol}/kline:
    get:
      summary: 获取股票 K 线数据
      description: |
        获取历史 K 线数据 (OHLCV)，不包含技术指标计算。
        **AkShare**:
        - A股: `stock_zh_a_hist()`
        - 港股: `stock_hk_hist()`
        - 美股: `stock_us_hist()`
      tags: [Stock]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - $ref: "#/components/parameters/Market"
        - $ref: "#/components/parameters/Period"
        - $ref: "#/components/parameters/Adjust"
        - $ref: "#/components/parameters/Limit"
      responses:
        "200":
          description: K 线数据
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/KLinePoint"

  # ==================== ETF 数据 ====================
  /api/v1/akshare/etf/list:
    get:
      summary: 获取全量 ETF 列表 (同步用)
      description: |
        **用途**: 供定时任务同步使用。
        **AkShare**: `fund_etf_spot_em()`
      tags: [ETF]
      responses:
        "200":
          description: ETF 列表
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EtfListItem"

  /api/v1/akshare/etf/{symbol}/spot:
    get:
      summary: 获取 ETF 实时行情
      description: |
        获取 ETF 实时行情，包含 IOPV 和折溢价率。
        **AkShare**: `fund_etf_spot_em()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: ETF 行情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EtfSpot"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/etf/{symbol}/info:
    get:
      summary: 获取 ETF 基本信息
      description: |
        获取 ETF 跟踪标的、收益表现等信息。
        **AkShare**: `fund_info_index_em()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: ETF 信息
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EtfInfo"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/etf/{symbol}/holdings:
    get:
      summary: 获取 ETF 持仓
      description: |
        获取 ETF 十大重仓股。
        **AkShare**: `fund_portfolio_hold_em()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - name: year
          in: query
          schema:
            type: string
            pattern: "^[0-9]{4}$"
          description: 数据年份
      responses:
        "200":
          description: 持仓列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Holdings"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/etf/{symbol}/fund-flow:
    get:
      summary: 获取 ETF 资金流向
      description: |
        获取 ETF 资金流向数据。
        **AkShare**: 包含在 `fund_etf_spot_em()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 资金流向
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundFlow"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/etf/{symbol}/dividend:
    get:
      summary: 获取 ETF 分红记录
      description: |
        获取 ETF 历史分红记录。
        **AkShare**: `fund_etf_dividend_sina()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 分红记录
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DividendHistory"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/etf/{symbol}/kline:
    get:
      summary: 获取 ETF K 线数据
      description: |
        获取 ETF 历史 K 线数据。
        **AkShare**: `fund_etf_hist_em()`
      tags: [ETF]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - $ref: "#/components/parameters/Period"
        - $ref: "#/components/parameters/Adjust"
        - $ref: "#/components/parameters/Limit"
      responses:
        "200":
          description: K 线数据
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/KLinePoint"

  # ==================== 场外基金数据 ====================
  /api/v1/akshare/fund/list:
    get:
      summary: 获取全量场外基金列表 (同步用)
      description: |
        **用途**: 供定时任务同步使用。
        **AkShare**: `fund_open_fund_daily_em()`
      tags: [Fund]
      responses:
        "200":
          description: 基金列表
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FundListItem"

  /api/v1/akshare/fund/{symbol}/nav:
    get:
      summary: 获取基金最新净值
      description: |
        获取基金单位净值、累计净值、日增长率。
        **AkShare**: `fund_open_fund_daily_em()`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 基金净值
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundNav"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/info:
    get:
      summary: 获取基金基本信息
      description: |
        获取基金经理、规模、风险等级等信息。
        **AkShare**: `fund_individual_basic_info_xq()`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 基金信息
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundInfo"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/performance:
    get:
      summary: 获取基金收益表现
      description: |
        获取近期收益率数据。
        **AkShare**: `fund_open_fund_rank_em()`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 收益表现
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundPerformance"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/holdings:
    get:
      summary: 获取基金持仓
      description: |
        获取基金十大重仓股。
        **AkShare**: `fund_portfolio_hold_em()`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - name: year
          in: query
          schema:
            type: string
            pattern: "^[0-9]{4}$"
          description: 数据年份
      responses:
        "200":
          description: 持仓列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Holdings"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/allocation:
    get:
      summary: 获取基金资产配置
      description: |
        获取股票、债券、现金等资产配置比例及行业配置。
        **AkShare**:
        - `fund_report_asset_allocation_cninfo()`: 资产配置
        - `fund_portfolio_industry_allocation_em()`: 行业配置
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 资产配置
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundAllocation"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/estimation:
    get:
      summary: 获取基金盘中估值
      description: |
        获取基金实时估算净值（交易时间内）。
        **AkShare**: `fund_value_estimation_em()`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
      responses:
        "200":
          description: 盘中估值
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundEstimation"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/v1/akshare/fund/{symbol}/nav-history:
    get:
      summary: 获取基金历史净值
      description: |
        获取基金历史净值走势。
        **AkShare**: `fund_open_fund_info_em(indicator="单位净值走势")`
      tags: [Fund]
      parameters:
        - $ref: "#/components/parameters/Symbol"
        - name: limit
          in: query
          schema:
            type: integer
            default: 90
            maximum: 365
          description: 返回数据点数量
      responses:
        "200":
          description: 历史净值
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NavHistory"
        "404":
          $ref: "#/components/responses/NotFound"

  # ==================== 技术指标计算 ====================
  /api/v1/indicators/calculate:
    post:
      summary: 计算技术指标
      description: |
        根据 K 线数据计算技术指标。

        **支持的指标**:
        - `ma(n)`: n日移动平均线
        - `ema(n)`: n日指数移动平均
        - `macd(fast,slow,signal)`: MACD
        - `rsi(n)`: RSI
        - `boll(n,std)`: 布林带
        - `kdj(n,m1,m2)`: KDJ
      tags: [Indicators]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/IndicatorRequest"
      responses:
        "200":
          description: 计算结果
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/IndicatorResponse"

  /api/v1/indicators/supported:
    get:
      summary: 获取支持的指标列表
      tags: [Indicators]
      responses:
        "200":
          description: 指标列表
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/IndicatorMeta"

components:
  parameters:
    Symbol:
      name: symbol
      in: path
      required: true
      schema:
        type: string
      description: 标的代码

    Market:
      name: market
      in: query
      schema:
        type: string
        enum: [CN, HK, US]
      description: |
        市场类型:
        - CN: A股 (上交所/深交所)
        - HK: 港股
        - US: 美股

    Period:
      name: period
      in: query
      schema:
        type: string
        enum: [day, week, month]
        default: day
      description: |
        K 线周期:
        - day: 日线
        - week: 周线
        - month: 月线

    Adjust:
      name: adjust
      in: query
      schema:
        type: string
        enum: ["", qfq, hfq]
        default: qfq
      description: |
        复权类型:
        - 空: 不复权
        - qfq: 前复权
        - hfq: 后复权

    Limit:
      name: limit
      in: query
      schema:
        type: integer
        default: 250
        maximum: 1000
      description: 数据点数量

  responses:
    NotFound:
      description: 资源不存在
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

  schemas:
    Error:
      type: object
      description: 错误响应
      properties:
        code:
          type: string
          description: 错误码
        message:
          type: string
          description: 错误信息

    # ==================== 股票 ====================
    StockListItem:
      type: object
      properties:
        symbol:
          type: string
          description: 代码
        name:
          type: string
          description: 名称
        market:
          type: string
          enum: [CN, HK, US]
          description: 市场

    StockSpot:
      type: object
      description: 股票实时行情(A股含五档盘口)
      properties:
        symbol:
          type: string
          description: 股票代码
        name:
          type: string
          nullable: true
          description: 股票名称
        price:
          type: number
          description: 最新价
        open:
          type: number
          description: 今开
        prevClose:
          type: number
          description: 昨收
        high:
          type: number
          description: 最高
        low:
          type: number
          description: 最低
        avgPrice:
          type: number
          nullable: true
          description: 均价
        volume:
          type: number
          description: 成交量(手)
        amount:
          type: number
          description: 成交额(元)
        change:
          type: number
          description: 涨跌额
        changePercent:
          type: number
          description: 涨跌幅 (%)
        turnoverRate:
          type: number
          nullable: true
          description: 换手率 (%)
        amplitude:
          type: number
          nullable: true
          description: 振幅 (%)
        volumeRatio:
          type: number
          nullable: true
          description: 量比
        upperLimit:
          type: number
          nullable: true
          description: 涨停价
        lowerLimit:
          type: number
          nullable: true
          description: 跌停价
        outerVolume:
          type: number
          nullable: true
          description: 外盘(手)
        innerVolume:
          type: number
          nullable: true
          description: 内盘(手)
        bid1:
          type: number
          nullable: true
          description: 买一价
        bid1Volume:
          type: number
          nullable: true
          description: 买一量(手)
        bid2:
          type: number
          nullable: true
          description: 买二价
        bid2Volume:
          type: number
          nullable: true
          description: 买二量(手)
        bid3:
          type: number
          nullable: true
          description: 买三价
        bid3Volume:
          type: number
          nullable: true
          description: 买三量(手)
        bid4:
          type: number
          nullable: true
          description: 买四价
        bid4Volume:
          type: number
          nullable: true
          description: 买四量(手)
        bid5:
          type: number
          nullable: true
          description: 买五价
        bid5Volume:
          type: number
          nullable: true
          description: 买五量(手)
        ask1:
          type: number
          nullable: true
          description: 卖一价
        ask1Volume:
          type: number
          nullable: true
          description: 卖一量(手)
        ask2:
          type: number
          nullable: true
          description: 卖二价
        ask2Volume:
          type: number
          nullable: true
          description: 卖二量(手)
        ask3:
          type: number
          nullable: true
          description: 卖三价
        ask3Volume:
          type: number
          nullable: true
          description: 卖三量(手)
        ask4:
          type: number
          nullable: true
          description: 卖四价
        ask4Volume:
          type: number
          nullable: true
          description: 卖四量(手)
        ask5:
          type: number
          nullable: true
          description: 卖五价
        ask5Volume:
          type: number
          nullable: true
          description: 卖五量(手)
        timestamp:
          type: string
          format: date-time
          description: 数据更新时间

    StockProfile:
      type: object
      description: 公司基本信息
      properties:
        symbol:
          type: string
        name:
          type: string
        fullName:
          type: string
          nullable: true
        englishName:
          type: string
          nullable: true
        industry:
          type: string
          nullable: true
          description: 所属行业
        listingDate:
          type: string
          format: date
          nullable: true
          description: 上市日期
        totalShares:
          type: number
          nullable: true
          description: 总股本 (亿股)
        floatShares:
          type: number
          nullable: true
          description: 流通股 (亿股)
        mainBusiness:
          type: string
          nullable: true
          description: 主营业务
        registeredCapital:
          type: number
          nullable: true
          description: 注册资本 (亿元)
        employeeCount:
          type: integer
          nullable: true
          description: 员工人数
        legalRepresentative:
          type: string
          nullable: true
          description: 法人代表
        secretary:
          type: string
          nullable: true
          description: 董秘
        website:
          type: string
          nullable: true
          description: 公司官网
        phone:
          type: string
          nullable: true
          description: 联系电话
        address:
          type: string
          nullable: true
          description: 办公地址

    StockValuation:
      type: object
      properties:
        symbol:
          type: string
        marketCap:
          type: number
          nullable: true
          description: 总市值 (亿元)
        floatMarketCap:
          type: number
          nullable: true
          description: 流通市值 (亿元)
        pe:
          type: number
          nullable: true
          description: 市盈率
        pb:
          type: number
          nullable: true
          description: 市净率
        dividendYield:
          type: number
          nullable: true
          description: 股息率 (%)
        change60d:
          type: number
          nullable: true
          description: 60日涨跌幅 (%)
        changeYtd:
          type: number
          nullable: true
          description: 年初至今涨跌幅 (%)

    StockFinancial:
      type: object
      properties:
        symbol:
          type: string
        reportDate:
          type: string
          format: date
        revenue:
          type: number
          nullable: true
          description: 营业收入 (亿元)
        netProfit:
          type: number
          nullable: true
          description: 净利润 (亿元)
        eps:
          type: number
          nullable: true
          description: 每股收益
        bvps:
          type: number
          nullable: true
          description: 每股净资产
        roe:
          type: number
          nullable: true
          description: ROE (%)
        grossMargin:
          type: number
          nullable: true
          description: 毛利率 (%)
        debtRatio:
          type: number
          nullable: true
          description: 资产负债率 (%)

    StockShareholders:
      type: object
      properties:
        symbol:
          type: string
        shareholderCount:
          type: integer
          nullable: true
        fundHoldingRatio:
          type: number
          nullable: true
          description: 基金持股比例 (%)
        top10Shareholders:
          type: array
          items:
            $ref: "#/components/schemas/ShareholderItem"
        top10FloatShareholders:
          type: array
          items:
            $ref: "#/components/schemas/ShareholderItem"

    ShareholderItem:
      type: object
      description: 股东信息项
      properties:
        name:
          type: string
          description: 股东名称
        shares:
          type: number
          description: 持股数 (万股)
        percentage:
          type: number
          description: 持股比例 (%)
        change:
          type: string
          nullable: true
          description: 变动情况 (增持/减持/不变)

    BidAsk:
      type: object
      properties:
        symbol:
          type: string
        bids:
          type: array
          items:
            $ref: "#/components/schemas/PriceLevel"
        asks:
          type: array
          items:
            $ref: "#/components/schemas/PriceLevel"
        upperLimit:
          type: number
          nullable: true
          description: 涨停价
        lowerLimit:
          type: number
          nullable: true
          description: 跌停价
        outerVolume:
          type: number
          nullable: true
          description: 外盘
        innerVolume:
          type: number
          nullable: true
          description: 内盘

    PriceLevel:
      type: object
      description: 价格档位
      properties:
        price:
          type: number
          description: 价格
        volume:
          type: number
          description: 数量 (手)

    FundFlow:
      type: object
      properties:
        symbol:
          type: string
        mainNetInflow:
          type: number
          description: 主力净流入 (万元)
        mainNetInflowRatio:
          type: number
          nullable: true
          description: 主力净流入占比 (%)
        superLargeNetInflow:
          type: number
          nullable: true
          description: 超大单净流入 (万元)
        largeNetInflow:
          type: number
          nullable: true
          description: 大单净流入 (万元)
        mediumNetInflow:
          type: number
          nullable: true
          description: 中单净流入 (万元)
        smallNetInflow:
          type: number
          nullable: true
          description: 小单净流入 (万元)

    KLinePoint:
      type: object
      description: K 线数据点
      required: [timestamp, open, high, low, close, volume]
      properties:
        timestamp:
          type: number
          description: 时间戳 (毫秒)
        open:
          type: number
          description: 开盘价
        high:
          type: number
          description: 最高价
        low:
          type: number
          description: 最低价
        close:
          type: number
          description: 收盘价
        volume:
          type: number
          description: 成交量

    # ==================== ETF ====================
    EtfListItem:
      type: object
      description: ETF 列表项
      properties:
        symbol:
          type: string
          description: ETF 代码
        name:
          type: string
          description: ETF 名称

    EtfSpot:
      type: object
      properties:
        symbol:
          type: string
        name:
          type: string
        price:
          type: number
        change:
          type: number
        changePercent:
          type: number
        iopv:
          type: number
          description: IOPV 估值
        premium:
          type: number
          description: 折溢价率 (%)
        open:
          type: number
        prevClose:
          type: number
        high:
          type: number
        low:
          type: number
        volume:
          type: number
        amount:
          type: number
        turnoverRate:
          type: number
          nullable: true
        shares:
          type: number
          nullable: true
          description: 份额 (亿份)
        marketCap:
          type: number
          nullable: true
        tradingStatus:
          type: string
          enum: [TRADING, CLOSED, SUSPENDED]
          description: |
            交易状态:
            - TRADING: 交易中
            - CLOSED: 休市
            - SUSPENDED: 停牌
        timestamp:
          type: string
          format: date-time
          description: 数据更新时间

    EtfInfo:
      type: object
      properties:
        symbol:
          type: string
        name:
          type: string
        trackingIndex:
          type: string
          nullable: true
          description: 跟踪标的
        trackingType:
          type: string
          nullable: true
          description: 跟踪类型 (被动/增强)
        nav:
          type: number
          nullable: true
          description: 单位净值
        dailyReturn:
          type: number
          nullable: true
          description: 日增长率 (%)
        return1w:
          type: number
          nullable: true
          description: 近1周收益 (%)
        return1m:
          type: number
          nullable: true
          description: 近1月收益 (%)
        return3m:
          type: number
          nullable: true
          description: 近3月收益 (%)
        return1y:
          type: number
          nullable: true
          description: 近1年收益 (%)
        fee:
          type: number
          nullable: true
          description: 管理费 (%)
        minPurchase:
          type: string
          nullable: true
          description: 起购金额

    DividendHistory:
      type: object
      description: 分红历史
      properties:
        symbol:
          type: string
          description: 标的代码
        dividends:
          type: array
          description: 分红记录列表
          items:
            type: object
            properties:
              recordDate:
                type: string
                format: date
                description: 登记日
              exDate:
                type: string
                format: date
                description: 除息日
              dividendPerUnit:
                type: number
                description: 每份分红 (元)

    # ==================== 场外基金 ====================
    FundListItem:
      type: object
      description: 场外基金列表项
      properties:
        symbol:
          type: string
          description: 基金代码
        name:
          type: string
          description: 基金名称

    FundNav:
      type: object
      properties:
        symbol:
          type: string
        name:
          type: string
        nav:
          type: number
          description: 单位净值
        accNav:
          type: number
          description: 累计净值
        dailyReturn:
          type: number
          description: 日增长率 (%)
        dailyChange:
          type: number
          nullable: true
          description: 日增长值
        navDate:
          type: string
          format: date
          description: 净值日期
        prevNav:
          type: number
          nullable: true
          description: 前一日净值
        subscriptionStatus:
          type: string
          nullable: true
          description: 申购状态
        redemptionStatus:
          type: string
          nullable: true
          description: 赎回状态
        fee:
          type: number
          nullable: true
          description: 手续费 (%)

    FundInfo:
      type: object
      properties:
        symbol:
          type: string
        name:
          type: string
        fullName:
          type: string
          nullable: true
          description: 基金全称
        type:
          type: string
          nullable: true
          description: 基金类型
        manager:
          type: string
          nullable: true
          description: 基金经理
        company:
          type: string
          nullable: true
          description: 基金公司
        scale:
          type: string
          nullable: true
          description: 最新规模
        establishmentDate:
          type: string
          format: date
          nullable: true
          description: 成立日期
        custodian:
          type: string
          nullable: true
          description: 托管银行
        riskLevel:
          type: string
          nullable: true
          description: 风险等级
        rating:
          type: string
          nullable: true
          description: 基金评级
        benchmark:
          type: string
          nullable: true
          description: 业绩比较基准
        investmentStrategy:
          type: string
          nullable: true
          description: 投资策略
        investmentObjective:
          type: string
          nullable: true
          description: 投资目标

    FundPerformance:
      type: object
      properties:
        symbol:
          type: string
        return1w:
          type: number
          nullable: true
          description: 近1周收益 (%)
        return1m:
          type: number
          nullable: true
          description: 近1月收益 (%)
        return3m:
          type: number
          nullable: true
          description: 近3月收益 (%)
        return6m:
          type: number
          nullable: true
          description: 近6月收益 (%)
        return1y:
          type: number
          nullable: true
          description: 近1年收益 (%)
        return2y:
          type: number
          nullable: true
          description: 近2年收益 (%)
        return3y:
          type: number
          nullable: true
          description: 近3年收益 (%)
        returnYtd:
          type: number
          nullable: true
          description: 今年以来收益 (%)
        returnSinceInception:
          type: number
          nullable: true
          description: 成立以来收益 (%)

    FundAllocation:
      type: object
      description: 基金资产配置
      properties:
        symbol:
          type: string
          description: 基金代码
        assets:
          type: object
          description: 资产配置比例
          properties:
            stock:
              type: number
              nullable: true
              description: 股票占比 (%)
            bond:
              type: number
              nullable: true
              description: 债券占比 (%)
            cash:
              type: number
              nullable: true
              description: 现金占比 (%)
            other:
              type: number
              nullable: true
              description: 其他占比 (%)
        industries:
          type: array
          description: 行业配置
          items:
            type: object
            properties:
              name:
                type: string
                description: 行业名称
              percentage:
                type: number
                description: 配置比例 (%)
              categoryAvg:
                type: number
                nullable: true
                description: 同类平均 (%)

    FundEstimation:
      type: object
      description: 基金盘中估值
      properties:
        symbol:
          type: string
          description: 基金代码
        estimatedNav:
          type: number
          description: 估算净值
        estimatedReturn:
          type: number
          description: 估算涨跌幅 (%)
        estimatedTime:
          type: string
          format: date-time
          description: 估值时间

    NavHistory:
      type: object
      description: 历史净值
      properties:
        symbol:
          type: string
          description: 基金代码
        data:
          type: array
          description: 净值数据列表
          items:
            type: object
            properties:
              date:
                type: string
                format: date
                description: 净值日期
              nav:
                type: number
                description: 单位净值
              accNav:
                type: number
                description: 累计净值

    Holdings:
      type: object
      description: 持仓信息
      properties:
        symbol:
          type: string
          description: 标的代码
        reportDate:
          type: string
          format: date
          description: 报告期
        holdings:
          type: array
          description: 持仓列表
          items:
            $ref: "#/components/schemas/HoldingItem"

    HoldingItem:
      type: object
      description: 持仓项
      properties:
        symbol:
          type: string
          description: 持仓代码
        name:
          type: string
          description: 持仓名称
        percentage:
          type: number
          description: 持仓比例 (%)
        shares:
          type: number
          nullable: true
          description: 持仓股数 (万股)
        marketValue:
          type: number
          nullable: true
          description: 持仓市值 (万元)
        change:
          type: string
          nullable: true
          description: 变动情况 (新进/增持/减持/不变)

    IndicatorRequest:
      type: object
      description: 技术指标计算请求
      required: [data, indicators]
      properties:
        data:
          type: array
          description: K 线数据
          items:
            $ref: "#/components/schemas/KLinePoint"
        indicators:
          type: array
          description: 指标表达式列表
          items:
            type: string
          example: ["ma(5)", "ma(20)", "macd(12,26,9)"]

    IndicatorResponse:
      type: object
      description: 技术指标计算结果
      additionalProperties: true
      example:
        ma(5): [null, null, null, null, 10.12, 10.25]
        macd(12,26,9):
          dif: [0.15, 0.18, 0.22]
          dea: [0.10, 0.12, 0.14]
          histogram: [0.05, 0.06, 0.08]

    IndicatorMeta:
      type: object
      description: 技术指标元信息
      properties:
        name:
          type: string
          description: 指标名称
        syntax:
          type: string
          description: 语法格式
        description:
          type: string
          description: 指标说明
        parameters:
          type: array
          description: 参数列表
          items:
            type: string
        example:
          type: string
          description: 使用示例
